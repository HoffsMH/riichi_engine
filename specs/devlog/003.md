# Devlog 003 - Enums, Null Checks, and Display Scaffolding

**Date:** 2026-02-08

## What Changed
- Fixed memory leak: added `free(ptr)` to match `malloc`
- Added NULL check after `malloc` with `exit(1)` — cppcheck now clean
- Created `Suit` enum: `SUIT_DRAGON`, `SUIT_WIND`, `SUIT_MAN`, `SUIT_PIN`, `SUIT_SOU`
- Changed `Tile.suit` from `uint8_t` to `Suit` type
- Added `<stdbool.h>` for `bool` type
- Scaffolded `is_honor()` and `tile_to_utf8()` functions — display logic separate from engine data
- Created `specs/backlog/` for parking future topics; added `tooling.md` with dynamic analysis, coverage, debugging

## Concepts Learned
- **Enums** are compile-time only — replaced with integers in the binary, zero runtime cost
- **C has no namespaces** — prefix enum values (`SUIT_WIND` not `WIND`) to avoid collisions
- **Types don't exist at runtime** — no metadata, no reflection. Compiler uses types for checking, then discards them. This is core C philosophy: you pay for nothing you didn't ask for
- **`bool`** requires `<stdbool.h>` in C (unlike C++); returning `int` (0/non-zero) is the old-school alternative
- **`return;`** (no value) for early exit from `void` functions
- **Tooling categories**: build system, static analysis, formatting, testing, dynamic analysis, coverage, debugging
- **Unicode mahjong tiles** exist (U+1F000–U+1F02B); sequential within suits, so computable from base + offset

## Next Steps
- Implement UTF-8 encoding in `tile_to_utf8()` — compute code point from suit/value, encode as 4 bytes
- Move display functions to separate `display.c` / `display.h`
- Explore how C handles multi-file compilation and headers
